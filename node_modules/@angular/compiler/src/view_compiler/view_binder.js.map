{"version":3,"file":"view_binder.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/src/view_compiler/view_binder.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {tokenReference} from '../compile_metadata';\nimport {ElementSchemaRegistry} from '../schema/element_schema_registry';\nimport {AttrAst, BoundDirectivePropertyAst, BoundElementPropertyAst, BoundEventAst, BoundTextAst, DirectiveAst, ElementAst, EmbeddedTemplateAst, NgContentAst, ReferenceAst, TemplateAst, TemplateAstVisitor, TextAst, VariableAst, templateVisitAll} from '../template_parser/template_ast';\n\nimport {CompileElement} from './compile_element';\nimport {CompileView} from './compile_view';\nimport {bindOutputs} from './event_binder';\nimport {bindDirectiveAfterContentLifecycleCallbacks, bindDirectiveAfterViewLifecycleCallbacks, bindDirectiveWrapperLifecycleCallbacks, bindInjectableDestroyLifecycleCallbacks, bindPipeDestroyLifecycleCallbacks} from './lifecycle_binder';\nimport {bindDirectiveHostProps, bindDirectiveInputs, bindRenderInputs, bindRenderText} from './property_binder';\n/**\n * @param {?} view\n * @param {?} parsedTemplate\n * @param {?} schemaRegistry\n * @return {?}\n */\nexport function bindView(\n    view: CompileView, parsedTemplate: TemplateAst[], schemaRegistry: ElementSchemaRegistry): void {\n  const /** @type {?} */ visitor = new ViewBinderVisitor(view, schemaRegistry);\n  templateVisitAll(visitor, parsedTemplate);\n  view.pipes.forEach(\n      (pipe) => { bindPipeDestroyLifecycleCallbacks(pipe.meta, pipe.instance, pipe.view); });\n}\n\nclass ViewBinderVisitor implements TemplateAstVisitor {\nprivate _nodeIndex: number = 0;\n/**\n * @param {?} view\n * @param {?} _schemaRegistry\n */\nconstructor(public view: CompileView,\nprivate _schemaRegistry: ElementSchemaRegistry) {}\n/**\n * @param {?} ast\n * @param {?} parent\n * @return {?}\n */\nvisitBoundText(ast: BoundTextAst, parent: CompileElement): any {\n    const /** @type {?} */ node = this.view.nodes[this._nodeIndex++];\n    bindRenderText(ast, node, this.view);\n    return null;\n  }\n/**\n * @param {?} ast\n * @param {?} parent\n * @return {?}\n */\nvisitText(ast: TextAst, parent: CompileElement): any {\n    this._nodeIndex++;\n    return null;\n  }\n/**\n * @param {?} ast\n * @param {?} parent\n * @return {?}\n */\nvisitNgContent(ast: NgContentAst, parent: CompileElement): any { return null; }\n/**\n * @param {?} ast\n * @param {?} parent\n * @return {?}\n */\nvisitElement(ast: ElementAst, parent: CompileElement): any {\n    const /** @type {?} */ compileElement = /** @type {?} */(( <CompileElement>this.view.nodes[this._nodeIndex++]));\n    const /** @type {?} */ hasEvents = bindOutputs(ast.outputs, ast.directives, compileElement, true);\n    bindRenderInputs(ast.inputs, ast.outputs, hasEvents, compileElement);\n    ast.directives.forEach((directiveAst, dirIndex) => {\n      const /** @type {?} */ directiveWrapperInstance =\n          compileElement.directiveWrapperInstance.get(directiveAst.directive.type.reference);\n      bindDirectiveInputs(directiveAst, directiveWrapperInstance, dirIndex, compileElement);\n      bindDirectiveHostProps(\n          directiveAst, directiveWrapperInstance, compileElement, ast.name, this._schemaRegistry);\n    });\n    templateVisitAll(this, ast.children, compileElement);\n    // afterContent and afterView lifecycles need to be called bottom up\n    // so that children are notified before parents\n    ast.directives.forEach((directiveAst) => {\n      const /** @type {?} */ directiveInstance = compileElement.instances.get(directiveAst.directive.type.reference);\n      const /** @type {?} */ directiveWrapperInstance =\n          compileElement.directiveWrapperInstance.get(directiveAst.directive.type.reference);\n      bindDirectiveAfterContentLifecycleCallbacks(\n          directiveAst.directive, directiveInstance, compileElement);\n      bindDirectiveAfterViewLifecycleCallbacks(\n          directiveAst.directive, directiveInstance, compileElement);\n      bindDirectiveWrapperLifecycleCallbacks(\n          directiveAst, directiveWrapperInstance, compileElement);\n    });\n    ast.providers.forEach((providerAst) => {\n      const /** @type {?} */ providerInstance = compileElement.instances.get(tokenReference(providerAst.token));\n      bindInjectableDestroyLifecycleCallbacks(providerAst, providerInstance, compileElement);\n    });\n    return null;\n  }\n/**\n * @param {?} ast\n * @param {?} parent\n * @return {?}\n */\nvisitEmbeddedTemplate(ast: EmbeddedTemplateAst, parent: CompileElement): any {\n    const /** @type {?} */ compileElement = /** @type {?} */(( <CompileElement>this.view.nodes[this._nodeIndex++]));\n    bindOutputs(ast.outputs, ast.directives, compileElement, false);\n    ast.directives.forEach((directiveAst, dirIndex) => {\n      const /** @type {?} */ directiveInstance = compileElement.instances.get(directiveAst.directive.type.reference);\n      const /** @type {?} */ directiveWrapperInstance =\n          compileElement.directiveWrapperInstance.get(directiveAst.directive.type.reference);\n      bindDirectiveInputs(directiveAst, directiveWrapperInstance, dirIndex, compileElement);\n\n      bindDirectiveAfterContentLifecycleCallbacks(\n          directiveAst.directive, directiveInstance, compileElement);\n      bindDirectiveAfterViewLifecycleCallbacks(\n          directiveAst.directive, directiveInstance, compileElement);\n      bindDirectiveWrapperLifecycleCallbacks(\n          directiveAst, directiveWrapperInstance, compileElement);\n    });\n    ast.providers.forEach((providerAst) => {\n      const /** @type {?} */ providerInstance = compileElement.instances.get(tokenReference(providerAst.token));\n      bindInjectableDestroyLifecycleCallbacks(providerAst, providerInstance, compileElement);\n    });\n    bindView(compileElement.embeddedView, ast.children, this._schemaRegistry);\n    return null;\n  }\n/**\n * @param {?} ast\n * @param {?} ctx\n * @return {?}\n */\nvisitAttr(ast: AttrAst, ctx: any): any { return null; }\n/**\n * @param {?} ast\n * @param {?} ctx\n * @return {?}\n */\nvisitDirective(ast: DirectiveAst, ctx: any): any { return null; }\n/**\n * @param {?} ast\n * @param {?} eventTargetAndNames\n * @return {?}\n */\nvisitEvent(ast: BoundEventAst, eventTargetAndNames: Map<string, BoundEventAst>): any {\n    return null;\n  }\n/**\n * @param {?} ast\n * @param {?} ctx\n * @return {?}\n */\nvisitReference(ast: ReferenceAst, ctx: any): any { return null; }\n/**\n * @param {?} ast\n * @param {?} ctx\n * @return {?}\n */\nvisitVariable(ast: VariableAst, ctx: any): any { return null; }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitDirectiveProperty(ast: BoundDirectivePropertyAst, context: any): any { return null; }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitElementProperty(ast: BoundElementPropertyAst, context: any): any { return null; }\n}\n\nfunction ViewBinderVisitor_tsickle_Closure_declarations() {\n /** @type {?} */\nViewBinderVisitor.prototype._nodeIndex;\n /** @type {?} */\nViewBinderVisitor.prototype.view;\n /** @type {?} */\nViewBinderVisitor.prototype._schemaRegistry;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}