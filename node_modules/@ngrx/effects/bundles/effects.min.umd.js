!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("rxjs/observable/merge"),require("rxjs/operator/ignoreElements"),require("@angular/core"),require("@ngrx/store"),require("rxjs/Observable"),require("rxjs/operator/filter"),require("rxjs/Subscription")):"function"==typeof define&&define.amd?define(["exports","rxjs/observable/merge","rxjs/operator/ignoreElements","@angular/core","@ngrx/store","rxjs/Observable","rxjs/operator/filter","rxjs/Subscription"],factory):factory((global.ngrx=global.ngrx||{},global.ngrx.effects=global.ngrx.effects||{}),global.Rx.Observable,global.Rx.Observable.prototype,global.ng.core,global.ngrx.store,global.Rx,global.Rx.Observable.prototype,global.Rx)}(this,function(exports,rxjs_observable_merge,rxjs_operator_ignoreElements,_angular_core,_ngrx_store,rxjs_Observable,rxjs_operator_filter,rxjs_Subscription){"use strict";function Effect(_a){var dispatch=(void 0===_a?{dispatch:!0}:_a).dispatch;return function(target,propertyName){Reflect.hasOwnMetadata(METADATA_KEY,target)||Reflect.defineMetadata(METADATA_KEY,[],target);var effects=Reflect.getOwnMetadata(METADATA_KEY,target),metadata={propertyName:propertyName,dispatch:dispatch};Reflect.defineMetadata(METADATA_KEY,effects.concat([metadata]),target)}}function getEffectsMetadata(instance){var target=Object.getPrototypeOf(instance);return Reflect.hasOwnMetadata(METADATA_KEY,target)?Reflect.getOwnMetadata(METADATA_KEY,target):[]}function mergeEffects(instance){var observables=getEffectsMetadata(instance).map(function(_a){var propertyName=_a.propertyName,dispatch=_a.dispatch,observable="function"==typeof instance[propertyName]?instance[propertyName]():instance[propertyName];return dispatch===!1?rxjs_operator_ignoreElements.ignoreElements.call(observable):observable});return rxjs_observable_merge.merge.apply(void 0,observables)}function runAfterBootstrapEffects(injector,subscription){return function(){var effectInstances=injector.get(afterBootstrapEffects,!1);effectInstances&&subscription.addEffects(effectInstances)}}function toPayload(action){return action.payload}var METADATA_KEY="@ngrx/effects",__extends=void 0||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate=void 0||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=void 0||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},__param=void 0||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},Actions=function(_super){function Actions(actionsSubject){var _this=_super.call(this)||this;return _this.source=actionsSubject,_this}return __extends(Actions,_super),Actions.prototype.ofType=function(){for(var keys=[],_i=0;_i<arguments.length;_i++)keys[_i]=arguments[_i];return rxjs_operator_filter.filter.call(this,function(_a){var type=_a.type,len=keys.length;if(1===len)return type===keys[0];for(var i=0;len>i;i++)if(keys[i]===type)return!0;return!1})},Actions=__decorate([_angular_core.Injectable(),__param(0,_angular_core.Inject(_ngrx_store.Dispatcher)),__metadata("design:paramtypes",[rxjs_Observable.Observable])],Actions)}(rxjs_Observable.Observable),__extends$1=void 0||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2=void 0||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata$2=void 0||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},__param$1=void 0||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},effects=new _angular_core.OpaqueToken("ngrx/effects: Effects"),EffectsSubscription=function(_super){function EffectsSubscription(store,parent,effectInstances){var _this=_super.call(this)||this;return _this.store=store,_this.parent=parent,Boolean(parent)&&parent.add(_this),Boolean(effectInstances)&&_this.addEffects(effectInstances),_this}return __extends$1(EffectsSubscription,_super),EffectsSubscription.prototype.addEffects=function(effectInstances){var sources=effectInstances.map(mergeEffects),merged=rxjs_observable_merge.merge.apply(void 0,sources);this.add(merged.subscribe(this.store))},EffectsSubscription.prototype.ngOnDestroy=function(){this.closed||this.unsubscribe()},EffectsSubscription=__decorate$2([_angular_core.Injectable(),__param$1(0,_angular_core.Inject(_ngrx_store.Store)),__param$1(1,_angular_core.Optional()),__param$1(1,_angular_core.SkipSelf()),__param$1(2,_angular_core.Optional()),__param$1(2,_angular_core.Inject(effects)),__metadata$2("design:paramtypes",[Object,EffectsSubscription,Array])],EffectsSubscription)}(rxjs_Subscription.Subscription),afterBootstrapEffects=new _angular_core.OpaqueToken("ngrx:effects: Bootstrap Effects"),__decorate$1=void 0||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata$1=void 0||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},EffectsModule=function(){function EffectsModule(effectsSubscription){this.effectsSubscription=effectsSubscription}return EffectsModule_1=EffectsModule,EffectsModule.run=function(type){return{ngModule:EffectsModule_1,providers:[EffectsSubscription,type,{provide:effects,useExisting:type,multi:!0}]}},EffectsModule.runAfterBootstrap=function(type){return{ngModule:EffectsModule_1,providers:[type,{provide:afterBootstrapEffects,useExisting:type,multi:!0}]}},EffectsModule=EffectsModule_1=__decorate$1([_angular_core.NgModule({providers:[Actions,EffectsSubscription,{provide:_angular_core.APP_BOOTSTRAP_LISTENER,multi:!0,deps:[_angular_core.Injector,EffectsSubscription],useFactory:runAfterBootstrapEffects}]}),__metadata$1("design:paramtypes",[EffectsSubscription])],EffectsModule);var EffectsModule_1}();exports.Effect=Effect,exports.mergeEffects=mergeEffects,exports.Actions=Actions,exports.EffectsModule=EffectsModule,exports.EffectsSubscription=EffectsSubscription,exports.toPayload=toPayload,exports.runAfterBootstrapEffects=runAfterBootstrapEffects,Object.defineProperty(exports,"__esModule",{value:!0})});